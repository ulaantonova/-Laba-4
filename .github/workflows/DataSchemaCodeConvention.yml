name: Data Schema Code Convention Check

# Запускати при push в основну гілку або вручну
on:
  push:
    branches: [ main, master ] # Змініть на вашу основну гілку
  workflow_dispatch:

jobs:
  check-sql-convention:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Install SQL Linter (Sqlfluff)
      
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'
          
      - name: Install Sqlfluff
        run: pip install sqlfluff
        
      - name: Run Code Convention Check (DataSchema.sql)
        
        run: |
          echo "Starting SQL Code Convention Check..."
         
          sqlfluff lint DataSchema.sql --dialect postgres --format github || true 
        
